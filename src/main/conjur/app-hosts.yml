# conjur policy update -f app-hosts.yml -b data/bnl
- !policy
  id: ocp-apps
  body:
    - !group
    - &hosts
      - !host
        id: test-app-java-sdk-sa
        annotations:
          authn/api-key: true
      - !host
        id: system:serviceaccount:bnl-test-app-namespace:test-app-java-sdk-jwt-sa
        annotations:
          authn-jwt/jwt-cluster/kubernetes.io/namespace: bnl-test-app-namespace
          authn-jwt/jwt-cluster/kubernetes.io/serviceaccount/name: test-app-java-sdk-jwt-sa
          authn/api-key: true
    - !grant
      role: !group
      members: *hosts
    - &variables
      - !variable url
      - !variable username
      - !variable password
    - !permit
      role: !group
      privilege: [ read, execute ]
      resource: *variables

